{"title":"Latex 代码高亮问题","date":"2018-03-25T07:00:00.000Z","date_formatted":{"ll":"Mar 25, 2018","L":"03/25/2018","MM-DD":"03-25"},"link":"post/latex代码高亮","tags":["LaTex","Tricks"],"categories":["学习笔记"],"updated":"2020-05-10T08:11:18.000Z","content":"<p>今天是这学期第一次写报告，好些个月没使 LaTex 竟然有些手生，又遇到了一些关于代码高亮的问题，于是就写了这个简短的 post 来记录一下问题和解决方法。作为一个理工科的学生，报告里面插代码是基本技能。基础的就是 <code>listings</code> 包的使用。</p>\n<a id=\"more\"></a><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">\\usepackage&#123;listings&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\\definecolor&#123;vgreen&#125;&#123;RGB&#125;&#123;104,180,104&#125;</span><br><span class=\"line\">\\definecolor&#123;vblue&#125;&#123;RGB&#125;&#123;49,49,255&#125;</span><br><span class=\"line\">\\definecolor&#123;vorange&#125;&#123;RGB&#125;&#123;255,143,102&#125;</span><br><span class=\"line\">\\lstset</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\tlanguage&#x3D;Verilog,                  % set language</span><br><span class=\"line\">\tbasicstyle&#x3D;\\small\\ttfamily,        % set code style</span><br><span class=\"line\">\tkeywordstyle&#x3D;\\color&#123;vblue&#125;,</span><br><span class=\"line\">\tidentifierstyle&#x3D;\\color&#123;black&#125;,</span><br><span class=\"line\">\tcommentstyle&#x3D;\\color&#123;vgreen&#125;,</span><br><span class=\"line\">\tnumbers&#x3D;left,                      % set line numbers</span><br><span class=\"line\">\tnumberstyle&#x3D;&#123;\\tiny \\color&#123;black&#125;&#125;, % set fonts of line numbers</span><br><span class=\"line\">\tframe&#x3D;single,                      % set type of open </span><br><span class=\"line\">\tnumbersep&#x3D;10pt,</span><br><span class=\"line\">\tbreaklines&#x3D;true,                   % automatic line break</span><br><span class=\"line\">\ttabsize&#x3D;4</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><h1 id=\"matlab-高亮\">MATLAB 高亮<a href=\"#matlab-高亮\" title=\"MATLAB 高亮\"></a></h1><p>前面的都是这些一些比较 general 的代码块设定。而不管是当时数学建模还是平时 coursework 的报告，MATLAB用的比较多（毕竟EE工科狗，不是CS成功人士），所以这里专门一个section写 MATLAB 的代码高亮。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">% use mcode.sty file to highlight Matlab code</span><br><span class=\"line\">\\usepackage[framed,numbered,autolinebreaks,useliterate]&#123;mcode&#125; </span><br><span class=\"line\"></span><br><span class=\"line\">\\begin&#123;document&#125;</span><br><span class=\"line\">    \\textbf&#123;\\textcolor[rgb]&#123;0.98,0.00,0.00&#125;&#123;xxxx&#125;&#125;</span><br><span class=\"line\">    \\lstinputlisting[language &#x3D; Matlab]&#123;.&#x2F;code&#x2F;xxxx.m&#125;</span><br><span class=\"line\">\\end&#123;document&#125;</span><br></pre></td></tr></table></figure><p>以上这段 LaTex 也确实可以实现一般的MATLAB代码在文中高亮，然而在这次写报告的过程中，因为使用到了 Image Processing ToolBox，有许多参数的形式是以字符串的形式传进函数的。这样就无法避免单引号的使用，而这些单引号会引起许多迷之报错。这里并不深入讨论造成问题的具体原因和 LaTex 的相关机制，只提供一个可替代的方法来解决问题。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">\\usepackage&#123;matlab-prettifier&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\\begin&#123;document&#125;</span><br><span class=\"line\">    \\textbf&#123;\\textcolor[rgb]&#123;0.98,0.00,0.00&#125;&#123;xxxx&#125;&#125;</span><br><span class=\"line\">    \\lstinputlisting[language &#x3D; Matlab]&#123;.&#x2F;code&#x2F;xxxx.m&#125;</span><br><span class=\"line\">\\end&#123;document&#125;</span><br></pre></td></tr></table></figure><p><a href=\"https://tex.stackexchange.com/questions/75116/what-can-i-use-to-typeset-matlab-code-in-my-document/158816#158816\" target=\"_blank\"><code>matlab pretifier</code></a> 是一个最早在 ctan 上发布的包，现在在 textlive 上面也可以使用了。它在 <code>mcode.sty</code> 的基础上做了许多方面的改进。用设置 lstlisting 的设定就可以方便的规范 MATLAB 代码，并有非常美观的关键字高亮，省去了手动设定颜色的麻烦。</p>\n<p>最后，“Search before you ask”。细节的问题目前还没碰到，各种各样的问题总会不断的出现，还是要没事儿谷歌自己去搜索问题解决的方法，多看官方文档（Reference有提到的包的文档）。毕竟面向谷歌编程，面向 Stack Overflow 编程。</p>\n<p><img src=\"http://post-pic.nos-eastchina1.126.net/search.jpg\" class=\"φcy\" alt=\"Search Before Ask\"></p>\n<h1 id=\"reference\">Reference<a href=\"#reference\" title=\"Reference\"></a></h1><ul><li><a href=\"http://texdoc.net/texmf-dist/doc/latex/listings/listings.pdf\" target=\"_blank\">Listings Package Doc</a></li>\n<li><a href=\"https://mirror.hmc.edu/ctan/macros/latex/contrib/matlab-prettifier/matlab-prettifier.pdf\" target=\"_blank\">matlab-pretifier Doc</a></li>\n<li><a href=\"https://tex.stackexchange.com/questions/214612/what-is-the-difference-between-usepackagemcode-and-usepackagelistings-for\" target=\"_blank\">what-is-the-difference-between-usepackagemcode-and-usepackagelistings</a></li>\n</ul>","prev":{"title":"Linux命令行","link":"post/linux命令行"},"next":{"title":"C++ vector","link":"post/cpp-vector"},"plink":"https://magi003769.github.io/post/latex代码高亮/","toc":[{"id":"matlab-高亮","title":"MATLAB 高亮","index":"1"},{"id":"reference","title":"Reference","index":"2"}]}